(function($,undefined){if($.mobile.fixedtoolbar.prototype.options.supportBlacklist()&&$.support.scrollTop){var oldcreate=$.mobile.fixedtoolbar.prototype._create,createPolyfill=function(){if(this.options.polyfillSupport===true){var toolbar=this.element,tbType=toolbar.hasClass("ui-header-fixed")?"header":"footer",page=toolbar.closest(":jqmData(role='page')");toolbar.addClass("ui-fixed-faux");var resetPos=(function(){if(tbType==="header"){return function(){toolbar.css("top",$(window).scrollTop()+"px");};}else{return function(){toolbar.css("bottom",page.outerHeight()-$(window).scrollTop()-$.mobile.getScreenHeight()+"px");}}})();$.mobile.fixedtoolbar.prototype.updatePosition=resetPos;page.bind("pagebeforeshow",function(e){var visible;(($(document).scrollTop()===0)?$(window):$(document)).bind("scrollstart.fixedtoolbarpolyfill",function(){$('#footer').hide();}).bind("scrollstop.fixedtoolbarpolyfill",function(){resetPos();});$(window).bind("throttledresize.fixedtoolbarpolyfill",resetPos);resetPos();});}};$.mobile.fixedtoolbar.prototype.options.supportBlacklist=function(){return false;};$.mobile.fixedtoolbar.prototype.options.polyfillSupport=true;$.mobile.fixedtoolbar.prototype._create=function(){oldcreate.call(this);createPolyfill.call(this);};}})(jQuery);
