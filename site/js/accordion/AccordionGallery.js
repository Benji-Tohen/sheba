/*
Licensed on FLComponents.net licenses.
*/

function FLCObject(){}FLCObject.prototype.Render=function(a,b){$(a).append(b.Definition)};function Element(){this.Definition=null}Element.prototype.AddChild=function(a){this.Definition.append(a.Definition)};Element.prototype.AddAttributesWithValue=function(b,a){this.Definition.attr(b,a)};Element.prototype.AddText=function(a){this.Definition.text(a)};Element.prototype.AddHtml=function(a){this.Definition.html(a)};Element.prototype.AddInlineStyle=function(a,b){this.Definition.css(a,b)};Div.prototype=new Element;Div.prototype.constructor=Div;function Div(a){this.Definition=$("<div></div>");if(a!="undefined"){}this.Definition.attr("Id",a)}Ul.prototype=new Element;Ul.prototype.constructor=Ul;function Ul(a){this.Definition=$("<ul></ul>");if(this.Id!="undefined"){}this.Definition.attr("Id",this.Id)}Li.prototype=new Element;Li.prototype.constructor=Li;function Li(a){this.Definition=$("<li></li>");if(this.Id!="undefined"){}this.Definition.attr("Id",this.Id)}Img.prototype=new Element;Img.prototype.constructor=Img;function Img(a){this.Definition=$("<Img></Img>");if(this.Id!="undefined"){}this.Definition.attr("Id",this.Id)}A.prototype=new Element;A.prototype.constructor=A;function A(a){this.Definition=$("<a></a>");if(this.Id!="undefined"){}this.Definition.attr("Id",this.Id)}(function(a){a.fn.FLCAccordion=function(p){var o=a.extend({},a.fn.FLCAccordion.defaults,p);var m="Can not load configuration XML, please check the path.";var g=this.selector;var j=0;var h=false;jQuery.extend(jQuery.easing,{easeOutBounce:function(u,v,w,y,i){if((v/=i)<(1/2.75)){return y*(7.5625*v*v)+w}else{if(v<(2/2.75)){return y*(7.5625*(v-=(1.5/2.75))*v+0.75)+w}else{if(v<(2.5/2.75)){return y*(7.5625*(v-=(2.25/2.75))*v+0.9375)+w}else{return y*(7.5625*(v-=(2.625/2.75))*v+0.984375)+w}}}},easeInOutBounce:function(B,v,w,y,C){var i=1.70158;var u=0;var z=y;if(v==0){return w}if((v/=C/2)==2){return w+y}if(!u){u=C*(0.3*1.5)}if(z<Math.abs(y)){z=y;var i=u/4}else{i=u/(2*Math.PI)*Math.asin(y/z)}if(v<1){return -0.5*(z*Math.pow(2,10*(v-=1))*Math.sin((v*C-i)*(2*Math.PI)/u))+w}return z*Math.pow(2,-10*(v-=1))*Math.sin((v*C-i)*(2*Math.PI)/u)*0.5+y+w}});accordion=new Div("container");accordion.AddInlineStyle("position","relative");ul=new Ul();accordion.AddChild(ul);var e=null;var d=0;var t;if(o.htmlConfig==true){e=a(g+" ul");t=a(e).find("li").length;l(e)}else{a.ajax({type:"GET",url:o.assetsPath+"/data.xml",dataType:"xml",success:function(i){t=a(i).find("li").length;l(a(i))},error:function(i,v,u){alert(m)}})}function l(i){i.find("li").each(function(){var z;var y;var w;var v;var u;z=jQuery.trim(a(this).find("img").attr("src"));if(o.htmlConfig){y=a.trim(a(this).find('p[pos="left"]').html());w=a.trim(a(this).find('p[pos="bottom"]').html());v=a.trim(a(this).find('a[name="link"]').html())}else{y=a(this).find('p[pos="left"]').text();w=a(this).find('p[pos="bottom"]').text();v=a(this).find('a[name="link"]').text()}u=jQuery.trim(a(this).find('a[name="link"]').attr("target"));li=new Li();ul.AddChild(li);divTitle=new Div();divTitle.AddAttributesWithValue("class","title");divTitle.AddHtml(y);if(o.showLeftText==true){li.AddChild(divTitle)}divItem=new Div();divItem.AddAttributesWithValue("class","item");li.AddChild(divItem);divBottomText=new Div();divBottomText.AddAttributesWithValue("class","bottom-text");divBottomText.AddHtml(w);if(o.showBottomText==true){divItem.AddChild(divBottomText)}image=new Img();image.AddAttributesWithValue("src",z);if(v!=""){var x=new A();x.AddAttributesWithValue("href",v);if(u!="undefined"&&u!=""){x.AddAttributesWithValue("target",u)}divItem.AddChild(x);x.AddChild(image)}else{divItem.AddChild(image)}if(d==t-1){li.AddAttributesWithValue("class","last");li.AddInlineStyle("border-right","none")}d++});q(t)}function q(i){var u=0;u=(o.galleryWidth/i)-1;j=(o.galleryWidth-o.pictureWidth)/(i-1)-1;var v='<style type="text/css">'+g+" .title{width:"+o.galleryHeight+"px;height:30px;background-color:"+o.backgroundColor+';-moz-transform-origin:0 0;-webkit-transform-origin:0 0;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);color:#fff;font-size:17px;text-align:center;vertical-align:middle;position:absolute;bottom:-30px;left:0;line-height:30px;font-family:Arial}</style> <!--[if IE]><style type="text/css"> .title {top:0;filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);}</style><![endif]--> <style type="text/css"> '+g+"{position:relative;width:"+o.galleryWidth+"px;height:"+o.galleryHeight+"px;background-color:#000;font-size:18px;overflow:hidden}"+g+" ul{width:"+o.galleryWidth+"px;height:"+o.galleryHeight+"px;margin:0;padding:0}"+g+" li{float:left;height:"+o.galleryHeight+"px;width:"+u+"px;list-style:none;border-right:solid 1px "+o.borderColor+";position:relative;overflow:hidden}"+g+" li .item{height:"+o.galleryHeight+"px;width:"+o.pictureWidth+"px;position:absolute}"+g+" li img{height:"+o.galleryHeight+"px;width:"+o.pictureWidth+"px; border-width:0;}.last{overflow:visible!important;overflow-x:visible!important;overflow-y:visible!important}"+g+" .bottom-text{background-color:#000;width:"+(o.pictureWidth-20)+"px;padding:5px 10px 5px 10px; text-align:justify;font-family:Arial;color:#fff;font-weight:400;font-size:12px;position:absolute;bottom:-100px}</style>";a("head").append(v);if(e!=null){e.remove()}fl=new FLCObject();fl.Render(g,accordion);a(g+" .item").fadeTo(0,o.imagesOpacity,function(){});a(g+" .bottom-text").fadeTo(0,o.bottomTextOpacity,function(){});if(!o.autoPlay){if(o.eventType=="over"){a(g+"  li").mouseenter(function(){b(g,this)})}if(o.eventType=="click"){a(g+"  li").click(function(){b(g,this)})}a(g+"  .item").mouseenter(function(){r(this)});a(g+" ").mouseleave(function(){a(g+"  li").animate({width:u},{duration:o.animationTime,queue:false,easing:"swing",complete:function(){}})});a(g+"  .item").mouseleave(function(){s(this)})}else{a(g+" ").mouseenter(function(){h=true});a(g+" ").mouseleave(function(){h=false})}}function b(i,u){var v=u;a(i+"  li").animate({width:j},{duration:o.animationTime,queue:false,easing:"swing",complete:function(){}});a(v).find(".bottom-text").animate({bottom:10},{duration:1200,queue:false,easing:"easeInOutBounce"});a(v).animate({width:o.pictureWidth},{duration:o.animationTime,queue:false,easing:"swing",complete:function(){}})}function r(i){var u=i;a(u).fadeTo(o.animationTime,1,function(){a(u).clearQueue()})}function s(i){var u=i;a(u).find(".bottom-text").animate({bottom:-a(u).find(".bottom-text").height()-15},{duration:1200,queue:false,easing:"easeInOutBounce"});a(u).fadeTo(o.animationTime,o.imagesOpacity,function(){a(u).clearQueue()})}var k=0;var f=a(g+"  li");var c=a(g+"  .item");function n(){if(!h){if(o.switchOrder=="ltr"){if(k!=0){s(c[k-1])}else{s(c[t-1])}b(g,f[k]);r(c[k]);k++;if(k==t){k=0}}if(o.switchOrder=="rtl"){k++;if(k!=1){s(c[t-k+1])}else{s(c[0])}b(g,f[t-k]);r(c[t-k]);if(k==t){k=0}}}setTimeout(n,o.switchTime*1000)}if(o.autoPlay){n()}};a.fn.FLCAccordion.defaults={galleryWidth:600,galleryHeight:400,pictureWidth:300,backgroundColor:"#222",borderColor:"#9999aa",imagesOpacity:0.5,bottomTextOpacity:0.6,eventType:"over",showLeftText:true,showBottomText:true,animationTime:600,assetsPath:"assets",htmlConfig:true,autoPlay:false,switchTime:2,switchOrder:"ltr"}})(jQuery);